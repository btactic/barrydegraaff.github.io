<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: OpenPGPZimlet</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: OpenPGPZimlet</h1>

    




<section>

<header>
    
        <h2>OpenPGPZimlet</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="OpenPGPZimlet"><span class="type-signature"></span>new OpenPGPZimlet<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Creates the Zimbra OpenPGP Zimlet, extends <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmZimletBase.html">ZmZimletBase</a>.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line41">line 41</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    
        <h3 class="subsection-title">Extends</h3>

        


    <ul>
        <li>ZmZimletBase</li>
    </ul>


    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="_applyRequestHeaders"><span class="type-signature"></span>_applyRequestHeaders<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called from init and makes the Content-Type header available to determine if a mail message is pgp/mime. 
See <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmMailMsg.html#.addRequestHeaders">ZmMailMsg.html#.addRequestHeaders</a>.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line300">line 300</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="addAttachmentHandler"><span class="type-signature"></span>addAttachmentHandler<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method gets called from init and adds a handler for decrypting attachments and importing public key attachments
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line188">line 188</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="addFileInputPgpAttach"><span class="type-signature"></span>addFileInputPgpAttach<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This methods adds another attachment file picker to the UI if the user requests it (+ button).
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1151">line 1151</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="addPGPLink"><span class="type-signature"></span>addPGPLink<span class="signature">(attachment)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method is called from addAttachmentHandler
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>attachment</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the attachment (upstream documentation needed)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line213">line 213</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    html - html with link to decrypt attachments
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="addPubKeyLink"><span class="type-signature"></span>addPubKeyLink<span class="signature">(attachment)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method is called from addAttachmentHandler
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>attachment</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the attachment (upstream documentation needed)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line228">line 228</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    html - html with link to import public key attachments
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="b64ToUint6"><span class="type-signature"></span>b64ToUint6<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Array of bytes to base64 string decoding
See <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding$revision/773109">MDN Base64 encoding and decoding</a>.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2661">line 2661</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="base64DecToArr"><span class="type-signature"></span>base64DecToArr<span class="signature">(nChr)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Base64 decode binary safe. 
See <a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding$revision/773109">MDN Base64 encoding and decoding</a>.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>nChr</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">base64 encoded string</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2680">line 2680</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="cancelBtn"><span class="type-signature"></span>cancelBtn<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the dialog "CANCEL" button is clicked.
It pops-down the current dialog.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2439">line 2439</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="clearFileInputPgpAttach"><span class="type-signature"></span>clearFileInputPgpAttach<span class="signature">(obj)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method removes an attachment file picker from the UI if the user requests it (- button), in case there is only one file picker, empty that one but leave it in the DOM.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>obj</code></td>
            

            <td class="type">
            
                
<span class="param-type">button</span>


            
            </td>

            

            

            <td class="description last">the clicked button</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1162">line 1162</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="composeEncryptHandler"><span class="type-signature"></span>composeEncryptHandler<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the Encrypt button is clicked in the compose tab. It switches the compose mode to text/plain and opens the encrypt dialog.
See <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmComposeController.html">ZmComposeController</a>.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2516">line 2516</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="composeSignHandler"><span class="type-signature"></span>composeSignHandler<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the Sign button is clicked in the compose tab. It switches the compose mode to text/plain and opens the sign dialog.
See <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmComposeController.html">ZmComposeController</a>.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2541">line 2541</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="decryptAttachment"><span class="type-signature"></span>decryptAttachment<span class="signature">(name, url)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when a user clicks the `Decrypt` link next to an attachment and opens a decrypt dialog
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">attachment filename</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">attachment rest api fetch url</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line243">line 243</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="displayDialog"><span class="type-signature"></span>displayDialog<span class="signature">(id, title, message)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method displays dialogs to the end user.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">the dialog id to display</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>title</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">initial title for the dialog</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">additional arguments or message text for the dialog</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line849">line 849</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="displayMimeBodyPart"><span class="type-signature"></span>displayMimeBodyPart<span class="signature">(part, domId)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method parses/decodes and displays a body part from pgp/mime
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>part</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">message part</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>domId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the DOM id where to display the result</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1457">line 1457</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="doDrop"><span class="type-signature"></span>doDrop<span class="signature">(zmObject)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when a user drops an object on the Zimlet panel menu, it is no longer in use. And here for debugging.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zmObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">zmObject</span>


            
            </td>

            

            

            <td class="description last">a mail message, conversation or other object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line740">line 740</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="doubleClicked"><span class="type-signature"></span>doubleClicked<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method gets called by the Zimlet framework when double-click is performed. And calls the Manage Keys dialog.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line703">line 703</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="downloadBlob"><span class="type-signature"></span>downloadBlob<span class="signature">(filename, type, base64Data)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called whenever we need to download an attachment in the browser.
Depending on the type parameter it takes a base64 string or arraybuffer and downloads an attachment binary-safe in the browser.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>filename</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the filename</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">if zimbra/pgp the base64Data param is of type arraybuffer otherwise it is a base64 string</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>base64Data</code></td>
            

            <td class="type">
            
                
<span class="param-type">arraybuffer</span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the base64 encoded file</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2627">line 2627</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="emailErrorCheck"><span class="type-signature"></span>emailErrorCheck<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called by the Zimlet framework whenever an email is about to be send. This method checks if a user tries to send a private key and warns them it is NOT a good idea.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line662">line 662</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="escapeHtml"><span class="type-signature"></span>escapeHtml<span class="signature">(unsafe)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method is called to escape any HTML prior to putting it in the DOM to avoid XSS attacks
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>unsafe</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">source html text</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line688">line 688</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    - disarmed html text
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="forceSelectSelf"><span class="type-signature"></span>forceSelectSelf<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    When a user encrypts a message, the Zimlets selects the first public key by default (encrypt to self).
If you do not want to encrypt to yourself, you must click your name, and then the recipient
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2207">line 2207</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="importPubKey"><span class="type-signature"></span>importPubKey<span class="signature">(url)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when a user clicks the `Import public key` link next to an attachment and opens an import dialog
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">attachment rest api fetch url</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line262">line 262</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method gets called when Zimbra Zimlet framework initializes.
OpenPGPZimlet uses the init function to load openpgp.js and configure the user settings and runtime variables.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line47">line 47</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="initializeToolbar"><span class="type-signature"></span>initializeToolbar<span class="signature">(app, toolbar, controller, viewId)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Add encrypt and sign buttons to the toolbar in the compose tab. 
This method is called by the Zimlet framework when application toolbars are initialized.
See <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmZimletBase.html#initializeToolbar">ZmZimletBase.html#initializeToolbar</a>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>app</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmApp</span>


            
            </td>

            

            

            <td class="description last">the application</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>toolbar</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmButtonToolBar</span>


            
            </td>

            

            

            <td class="description last">the toolbar</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>controller</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmController</span>


            
            </td>

            

            

            <td class="description last">the application controller</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>viewId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the view Id</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2475">line 2475</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="localStorageRead"><span class="type-signature"></span>localStorageRead<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method decrypts a private key from html localstorage with AES-256 encryption.
It also encrypts localStorage that was created in previous versions of the Zimlet.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1661">line 1661</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    privkey - the ascii armored private key
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="localStorageSave"><span class="type-signature"></span>localStorageSave<span class="signature">(aes_password, privatekey)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method stores a private key to html localstorage with AES-256 encryption.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>aes_password</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the password for symmetric encryption</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>privatekey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the private key to store</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1641">line 1641</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="lookup"><span class="type-signature"></span>lookup<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method performs a keyserver lookup.
It uses the keyserver defined in config_template.xml and stores the result to the Zimbra LDAP.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2743">line 2743</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="menuItemSelected"><span class="type-signature"></span>menuItemSelected<span class="signature">(itemId)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This menu is called when a user clicks a menu item in the Zimlet menu. And calls a dialog or opens new window.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>itemId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the menu item id</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line712">line 712</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnDecrypt"><span class="type-signature"></span>okBtnDecrypt<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the Decrypt dialog "OK" button is clicked after private key has been entered.
and will show the decrypted OpenPGP encrypted message in the DOM.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fArguments.message</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the OpenPGP encrypted message</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fArguments.domId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the DOM id where to display the result</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1198">line 1198</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnDecryptFile"><span class="type-signature"></span>okBtnDecryptFile<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the Decrypt File dialog "OK" button is clicked after private key has been entered for decrypting a file.
and will decrypt the OpenPGP encrypted file. The result is a download in the browser.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fArguments.0</code></td>
            

            <td class="type">
            
                
<span class="param-type">arraybuffer</span>


            
            </td>

            

            

            <td class="description last">the OpenPGP encrypted file</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fArguments.1</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the file name</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1490">line 1490</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnEncrypt"><span class="type-signature"></span>okBtnEncrypt<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when OK is pressed in encrypt dialog. Compose Tab -> Encrypt button -> Dialog -> OK.
It should encrypt the email message and put it back in the current compose tab and also upload encrypted attachment and attach them to the current draft email.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2243">line 2243</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnImportPubKey"><span class="type-signature"></span>okBtnImportPubKey<span class="signature">(publicKey)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called for importing a public key received via email or key server lookup.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>publicKey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">ASCII armored PGP Public Key</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1804">line 1804</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnKeyPair"><span class="type-signature"></span>okBtnKeyPair<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the dialog "OK" button is clicked for key pair generation.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2008">line 2008</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnLookup"><span class="type-signature"></span>okBtnLookup<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the OK button is pressed in the Keyserver Lookup dialog.
At this time the UI only allows selection a single key for import. As dealing with multiple would be possible, but we could not re-use the code as the LDAP is too slow for dealing with multiple requests when fired with the current code.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2817">line 2817</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnPubKeySave"><span class="type-signature"></span>okBtnPubKeySave<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the dialog "OK" button is clicked in the Manage Public Keys dialog.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1726">line 1726</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="okBtnSign"><span class="type-signature"></span>okBtnSign<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called for clear-signing messages. Compose -> Sign button -> Dialog -> OK.
It should put the resulting message in the current compose tab.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1898">line 1898</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="onMsgView"><span class="type-signature"></span>onMsgView<span class="signature">(msg, oldMsg, msgView)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when a message is viewed in Zimbra. 
This Zimlet uses the onMsgView method to determine (sniff) what type of email is received and if it is PGP related do the appropriate actions.
This includes adding dom element, listeners and starting dialogs.
See <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmZimletBase.html#onMsgView">https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmZimletBase.html#onMsgView</a>.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmMailMsg</span>


            
            </td>

            

            

            <td class="description last">an email in <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmMailMsg.html">ZmMailMsg</a> format</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>oldMsg</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmMailMsg</span>


            
            </td>

            

            

            <td class="description last">unused</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msgView</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmMailMsgView</span>


            
            </td>

            

            

            <td class="description last">the current ZmMailMsgView (upstream documentation needed)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line314">line 314</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="passphraseRead"><span class="type-signature"></span>passphraseRead<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method decodes a passphrase from server LDAP or decrypts it from html localstorage.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1692">line 1692</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="printdiv"><span class="type-signature"></span>printdiv<span class="signature">(printdivname, subject)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called to print a decrypted message, pop-up the browser print preview.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>printdivname</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the HTML DIV id that contains the message to print</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subject</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the email subject</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2830">line 2830</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="pubkeyInfo"><span class="type-signature"></span>pubkeyInfo<span class="signature">(pubkey)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method reads public key details and returns them in HTML formatted style for adding it to the DOM
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pubkey</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">ASCII armored PGP Public Key</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2098">line 2098</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    result - HTML string with key details
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="pubKeySelect"><span class="type-signature"></span>pubKeySelect<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method generates an HTML select list with public keys from the server LDAP combined with those in the users contacts (optional).
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2127">line 2127</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    result - HTML string with SELECT input
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="pwgen"><span class="type-signature"></span>pwgen<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method generates a password like passphrase for lazy users.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2452">line 2452</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    pass -  a 25 character password
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="quoted_printable_decode"><span class="type-signature"></span>quoted_printable_decode<span class="signature">(str)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method decodes a quoted-printable encoded string.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>str</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">quoted-printable encoded string</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2702">line 2702</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    - decoded string
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="readAddressBook"><span class="type-signature"></span>readAddressBook<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called whenever the user changes his addressBook/contacts and on init.
It does an XHR request on the Zimbra REST API (export function). See <a href="global.html#addressBookPublicKeys">addressBookPublicKeys</a>.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2565">line 2565</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="reply"><span class="type-signature"></span>reply<span class="signature">(msg, decrypted, action)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when the Reply(All) links are clicked on a decrypted message (in the reading pane).
It opens a new compose window with the ---original message---.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">ZmMailMsg</span>


            
            </td>

            

            

            <td class="description last">an email in <a href="https://files.zimbra.com/docs/zimlet/zcs/8.6.0/jsapi-zimbra-doc/symbols/ZmMailMsg.html">ZmMailMsg</a> format</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>decrypted</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the decrypted mail body</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>action</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">parameter to distinguish between 'replyAll' or reply</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2848">line 2848</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="sendTo"><span class="type-signature"></span>sendTo<span class="signature">(message)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method is called when a user clicks `Send my public key` from the Zimlet menu.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">base64 encoded ASCII armored PGP Public Key</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1971">line 1971</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="singleClicked"><span class="type-signature"></span>singleClicked<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method gets called by the Zimlet framework when single-click is performed. And calls the Manage Keys dialog.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line695">line 695</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="status"><span class="type-signature"></span>status<span class="signature">(text, type)</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method shows a `ZmToast` status message. That fades in and out in a few seconds.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the message to display</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the style of the message e.g. ZmStatusView.LEVEL_INFO, ZmStatusView.LEVEL_WARNING, ZmStatusView.LEVEL_CRITICAL</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line839">line 839</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="submit"><span class="type-signature"></span>submit<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This method submits a public key to a keyserver.
It uses the keyserver defined in config_template.xml.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2789">line 2789</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="timeConverter"><span class="type-signature"></span>timeConverter<span class="signature">(UNIX_timestamp)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method converts a UNIX time stamp to a time that is usable in JavaScript.
See <a href="http://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript">http://stackoverflow.com/questions/847185/convert-a-unix-timestamp-to-time-in-javascript</a>.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>UNIX_timestamp</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">a UNIX timestamp</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2897">line 2897</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    - a human formatted time string (1 Aug 2036 22:41:50)
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="toggle_password"><span class="type-signature"></span>toggle_password<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Function to handle a show/hide button for password type input fields
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2912">line 2912</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="uniq"><span class="type-signature"></span>uniq<span class="signature">(a)</span><span class="type-signature"> &rarr; {array}</span></h4>

    



<div class="description">
    This method remove duplicates from an array or array like object.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>a</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last">the array or object with duplicates</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line1180">line 1180</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    - the array or object without duplicates
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">array</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="urlify"><span class="type-signature"></span>urlify<span class="signature">(text)</span><span class="type-signature"> &rarr; {string}</span></h4>

    



<div class="description">
    This method creates clickable links in decrypted messages.
See <a href="https://gist.github.com/vinitkumar/10000895">https://gist.github.com/vinitkumar/10000895</a>.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">a string without clickable links</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line2735">line 2735</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    - a string with http links replaced by HTML A HREF equivalent
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">string</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="verify"><span class="type-signature"></span>verify<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    The verify method is called for clear-signed messages. It checks against known public keys and
will update the status bar with the result (good/bad signature).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fArguments.0</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the OpenPGP clear-signed message</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>fArguments.1</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">the DOM id where to display the result</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="tk_barrydegraaff_zimbra_openpgp.js.html">tk_barrydegraaff_zimbra_openpgp.js</a>, <a href="tk_barrydegraaff_zimbra_openpgp.js.html#line749">line 749</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="OpenPGPZimlet.html">OpenPGPZimlet</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addressBookPublicKeys">addressBookPublicKeys</a></li><li><a href="global.html#onContactEdit">onContactEdit</a></li><li><a href="global.html#onShowView">onShowView</a></li><li><a href="global.html#privateKeyCache">privateKeyCache</a></li><li><a href="global.html#privatePassCache">privatePassCache</a></li><li><a href="global.html#settings">settings</a></li><li><a href="global.html#tk_barrydegraaff_zimbra_openpgp_HandlerObject">tk_barrydegraaff_zimbra_openpgp_HandlerObject</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Wed May 18 2016 12:16:16 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>